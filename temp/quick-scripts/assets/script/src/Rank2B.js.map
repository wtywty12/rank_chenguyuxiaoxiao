{"version":3,"sources":["Rank2B.js"],"names":["__extends","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__","constructor","prototype","create","__decorate","decorators","target","key","desc","c","arguments","length","r","getOwnPropertyDescriptor","Reflect","decorate","i","defineProperty","exports","value","propert","cc","_decorator","property","ccclass","ImageHelper_1","require","Rank2B","_super","_this","call","rank_1","rank_2","rank_3","head_1","head_2","head_3","score_1","score_2","score_3","ranks","heads","scores","old_datas","datas","pmIndex","old_pmIndex","mySore","upScore","downScore","isUpMove","playerId","moveTime","initView","updateItemInfo","updateView","analyData","console","log","data","get","playEffect","cb1","callFunc","playEffect1","dt","delayTime","uf","cb2","playEffect2","node","runAction","sequence","rank","width","moveBy","v2","upRank","x","y","upMoveTo","moveTo","spawn","ux","uy","downRank","dx","dy","type","max","head","score","active","ImageHelper","loadImage","string","Number","toString","Node","Sprite","Label","Component"],"mappings":"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","file":"Rank2B.js","sourceRoot":"../../../../../assets/script/src","sourcesContent":["\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    }\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar propert = cc._decorator.property;\nvar ccclass = cc._decorator.ccclass;\nvar ImageHelper_1 = require(\"./ImageHelper\");\nvar Rank2B = (function (_super) {\n    __extends(Rank2B, _super);\n    function Rank2B() {\n        var _this = _super.call(this) || this;\n        _this.rank_1 = null;\n        _this.rank_2 = null;\n        _this.rank_3 = null;\n        _this.head_1 = null;\n        _this.head_2 = null;\n        _this.head_3 = null;\n        _this.score_1 = null;\n        _this.score_2 = null;\n        _this.score_3 = null;\n        _this.ranks = [];\n        _this.heads = [];\n        _this.scores = [];\n        _this.old_datas = [];\n        _this.datas = [];\n        _this.pmIndex = -1;\n        _this.old_pmIndex = -1;\n        _this.mySore = -1;\n        _this.upScore = -1;\n        _this.downScore = -1;\n        _this.isUpMove = null;\n        _this.playerId = null;\n        _this.moveTime = null;\n        return _this;\n    }\n    Rank2B.prototype.initView = function (datas, playerId) {\n        this.moveTime = 0.5;\n        this.ranks = [this.rank_1, this.rank_2, this.rank_3];\n        this.heads = [this.head_1, this.head_2, this.head_3];\n        this.scores = [this.score_1, this.score_2, this.score_3];\n        this.old_datas = datas;\n        this.playerId = playerId;\n        this.updateItemInfo(1);\n    };\n    Rank2B.prototype.updateView = function (datas, playerId) {\n        this.datas = datas;\n        this.playerId = playerId;\n        this.updateItemInfo(2);\n    };\n    Rank2B.prototype.analyData = function (playerId) {\n        console.log(this.datas);\n        console.log(this.old_datas);\n        for (var i = 0; i < this.datas.length; i++) {\n            var data = this.datas[i];\n            if (+playerId == data.get(\"playerId\")) {\n                this.pmIndex = i;\n                break;\n            }\n        }\n        console.log(\"this.pmIndex = \" + this.pmIndex);\n        if (this.pmIndex != -1) {\n            for (var i = 0; i < 3; i++) {\n                var data = this.old_datas[i];\n                if (+playerId == data.get(\"playerId\")) {\n                    this.old_pmIndex = i;\n                    break;\n                }\n            }\n            console.log(\"old_pmIndex = \" + this.old_pmIndex);\n            if (this.pmIndex < this.old_pmIndex) {\n                console.log(\"i = \" + i);\n                if (i != 0) {\n                    this.upScore = this.datas[i - 1].get(\"score\");\n                    this.mySore = data.get(\"score\");\n                    if (this.mySore < this.upScore) {\n                        this.isUpMove = true;\n                        this.playEffect();\n                    }\n                }\n            }\n            else if (this.pmIndex > this.old_pmIndex) {\n                console.log(\"di = \" + i);\n                if (i != 2) {\n                    this.downScore = this.datas[i + 1].get(\"score\");\n                    this.mySore = data.get(\"score\");\n                    if (this.mySore > this.downScore) {\n                        this.isUpMove = false;\n                        this.playEffect();\n                    }\n                }\n            }\n        }\n    };\n    Rank2B.prototype.playEffect = function () {\n        var cb1 = cc.callFunc(this.playEffect1, this);\n        var dt = cc.delayTime(this.moveTime);\n        var uf = cc.callFunc(this.updateItemInfo, this);\n        var cb2 = cc.callFunc(this.playEffect2, this);\n        this.node.runAction(cc.sequence(cb1, dt, uf, cb2));\n    };\n    Rank2B.prototype.playEffect1 = function () {\n        for (var i = 0; i < 3; i++) {\n            var rank = this.ranks[i];\n            var width = rank.width;\n            var moveBy = cc.moveBy(this.moveTime, cc.v2(width, 0));\n            console.log(\"isUpMove = \" + this.isUpMove);\n            if (this.isUpMove) {\n                if (i == this.pmIndex) {\n                    var upRank = this.ranks[this.pmIndex - 1];\n                    var x = rank.x;\n                    var y = rank.y;\n                    var upMoveTo = cc.moveTo(this.moveTime, cc.v2(x, y));\n                    upRank.runAction(cc.spawn(moveBy, upMoveTo));\n                    var ux = upRank.x;\n                    var uy = upRank.y;\n                    var moveTo = cc.moveTo(this.moveTime, cc.v2(ux, uy));\n                    rank.runAction(cc.spawn(moveBy, moveTo));\n                }\n            }\n            else {\n                if (i == this.pmIndex) {\n                    var downRank = this.ranks[this.pmIndex - 1];\n                    var x = rank.x;\n                    var y = rank.y;\n                    var upMoveTo = cc.moveTo(this.moveTime, cc.v2(x, y));\n                    downRank.runAction(cc.spawn(moveBy, upMoveTo));\n                    var dx = downRank.x;\n                    var dy = downRank.y;\n                    var moveTo = cc.moveTo(this.moveTime, cc.v2(dx, dy));\n                    rank.runAction(cc.spawn(moveBy, moveTo));\n                }\n            }\n        }\n    };\n    Rank2B.prototype.updateItemInfo = function (type) {\n        var datas = null;\n        if (type == 1) {\n            datas = this.old_datas;\n        }\n        else {\n            datas = this.datas;\n        }\n        var length = datas.length;\n        var max = length < 3 && length || 3;\n        for (var i = 0; i < datas.length; i++) {\n            var value = datas[i];\n            if (value.get(\"playerId\") == +this.playerId) {\n                this.pmIndex = i;\n                break;\n            }\n        }\n        console.log(datas);\n        console.log(\"pd = \" + this.pmIndex);\n        for (var i = 0; i < 3; i++) {\n            var head = this.heads[i];\n            var score = this.scores[i];\n            if (this.pmIndex == 0 && i == 0) {\n                this.rank_1.active = true;\n                var data = datas[0];\n                ImageHelper_1.ImageHelper.loadImage(data.get(\"avatarUrl\"), head);\n                score.string = Number(data.get(\"score\")).toString();\n                this.rank_2.active = false;\n                this.rank_3.active = false;\n                return;\n            }\n            var data = datas[i + this.pmIndex - 1];\n            if (typeof data == \"undefined\") {\n                console.log(\"xi = \" + i);\n                this.ranks[i].active = false;\n                break;\n            }\n            this.ranks[i].active = true;\n            ImageHelper_1.ImageHelper.loadImage(data.get(\"avatarUrl\"), head);\n            score.string = Number(data.get(\"score\")).toString();\n        }\n    };\n    Rank2B.prototype.playEffect2 = function () {\n        for (var i = 0; i < 3; i++) {\n            var rank = this.ranks[i];\n            var width = rank.width;\n            var moveBy = cc.moveBy(this.moveTime, cc.v2(-width, 0));\n            rank.runAction(moveBy);\n        }\n    };\n    __decorate([\n        propert(cc.Node)\n    ], Rank2B.prototype, \"rank_1\", void 0);\n    __decorate([\n        propert(cc.Node)\n    ], Rank2B.prototype, \"rank_2\", void 0);\n    __decorate([\n        propert(cc.Node)\n    ], Rank2B.prototype, \"rank_3\", void 0);\n    __decorate([\n        propert(cc.Sprite)\n    ], Rank2B.prototype, \"head_1\", void 0);\n    __decorate([\n        propert(cc.Sprite)\n    ], Rank2B.prototype, \"head_2\", void 0);\n    __decorate([\n        propert(cc.Sprite)\n    ], Rank2B.prototype, \"head_3\", void 0);\n    __decorate([\n        propert(cc.Label)\n    ], Rank2B.prototype, \"score_1\", void 0);\n    __decorate([\n        propert(cc.Label)\n    ], Rank2B.prototype, \"score_2\", void 0);\n    __decorate([\n        propert(cc.Label)\n    ], Rank2B.prototype, \"score_3\", void 0);\n    Rank2B = __decorate([\n        ccclass()\n    ], Rank2B);\n    return Rank2B;\n}(cc.Component));\nexports.Rank2B = Rank2B;\n"]}