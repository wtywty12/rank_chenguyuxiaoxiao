{"version":3,"sources":["../../../../../assets/script/src/assets/script/src/ScrollView2A.js"],"names":["__extends","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__","constructor","prototype","create","__decorate","decorators","target","key","desc","c","arguments","length","r","getOwnPropertyDescriptor","Reflect","decorate","i","defineProperty","exports","value","ccclass","cc","_decorator","property","ScrollView2A","_super","_this","call","view","list","itemPrefab","spacingY","data","rowItemCounts","items","topMax","bottomMax","lastListY","itemHeight","itemMap","Map","onLoad","resetData","init","height","item","instantiate","Math","ceil","undefined","rankItem","getComponent","updateItem","set","push","addChild","x","y","clearAllData","clear","removeAllChildren","Node","Prefab","Component"],"mappings":"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","file":"ScrollView2A.js","sourceRoot":"../../../../../assets/script/src","sourcesContent":["\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    }\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar ccclass = cc._decorator.ccclass;\nvar property = cc._decorator.property;\nvar ScrollView2A = (function (_super) {\n    __extends(ScrollView2A, _super);\n    function ScrollView2A() {\n        var _this = _super.call(this) || this;\n        _this.view = null;\n        _this.list = null;\n        _this.itemPrefab = null;\n        _this.spacingY = null;\n        _this.data = null;\n        _this.rowItemCounts = null;\n        _this.items = null;\n        _this.topMax = null;\n        _this.bottomMax = null;\n        _this.lastListY = null;\n        _this.itemHeight = null;\n        _this.itemMap = new Map();\n        return _this;\n    }\n    ScrollView2A.prototype.onLoad = function () {\n        this.resetData();\n    };\n    ScrollView2A.prototype.resetData = function () {\n        this.data = [];\n        this.rowItemCounts = 0;\n        this.items = [];\n        this.topMax = 0;\n        this.bottomMax = 0;\n        this.lastListY = 0;\n        this.itemHeight = 0;\n        this.spacingY = 0;\n    };\n    ScrollView2A.prototype.init = function (data) {\n        this.data = data;\n        var height = 0;\n        var item = cc.instantiate(this.itemPrefab);\n        height = item.height;\n        this.itemHeight = height;\n        this.rowItemCounts = Math.ceil(this.view.height / (height + this.spacingY));\n        for (var i = 0; i < 15; ++i) {\n            if (data[i] == undefined)\n                break;\n            var rankItem = item.getComponent('Item2A');\n            rankItem.updateItem(data[i], i);\n            this.itemMap.set(item, i);\n            this.items.push(item);\n            this.list.addChild(item);\n            item.x = 0;\n            item.y = -(i * (height + this.spacingY));\n            if (i < 14) {\n                item = cc.instantiate(this.itemPrefab);\n            }\n        }\n        this.list.height = (this.items.length) * height + (this.items.length) * this.spacingY;\n        this.topMax = (5 * height + 4 * this.spacingY);\n        this.bottomMax = -(this.view.height + this.topMax);\n        this.lastListY = this.list.y;\n    };\n    ScrollView2A.prototype.clearAllData = function () {\n        this.itemMap.clear();\n        this.list.removeAllChildren();\n        this.resetData();\n    };\n    __decorate([\n        property(cc.Node)\n    ], ScrollView2A.prototype, \"view\", void 0);\n    __decorate([\n        property(cc.Node)\n    ], ScrollView2A.prototype, \"list\", void 0);\n    __decorate([\n        property(cc.Prefab)\n    ], ScrollView2A.prototype, \"itemPrefab\", void 0);\n    ScrollView2A = __decorate([\n        ccclass\n    ], ScrollView2A);\n    return ScrollView2A;\n}(cc.Component));\nexports.ScrollView2A = ScrollView2A;\n"]}